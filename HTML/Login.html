<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Login Page</title>
    <link rel="stylesheet" href="../styles/Login.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>

  <body>
    <div class="topnav">
      <img class="navlogo" src="../Images/logo.jpg" alt="" />
      <img id="navshow" src="../Images/icon-menu.svg" alt="" />
    </div>

    <div class="mobilenav" id="mobilenav">
      <ul>
        <li><a href="../index.html">Home</a></li>
        <li><a href="../HTML/Agent Login.html">Agents</a></li>
        <li><a href="../HTML/welcome.html">Get Started</a></li>
        <li><a href="../HTML/Login.html">Login</a></li>
      </ul>
    </div>

    <nav>
      <div class="container nav__container">
        <a href="#"><img src="../Images/logo.jpg" /></a>

        <ul class="nav__menu">
          <select name="dropdown" class="dpd">
            <option value="English" class="lngs">English</option>
            <option value="English" class="lngs">Hause</option>
            <option value="English" class="lngs">France</option>
            <option value="English" class="lngs">Yoruba</option>
          </select>
          <li><a href="index.html">Home</a></li>
          <li><a href="../HTML/Agent Login.html">Agents</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Support</a></li>
        </ul>

        <div class="nav_button">
          <a href="../HTML/Login.html" class="lotion_btn">Log in</a>
          <a href="../HTML/welcome.html" class="action_btn">Get Started</a>
        </div>
      </div>
    </nav>

    <div class="container">
      <aside><img class="imgaside" src="../Images/image2.png" alt="" /></aside>
      <main>
        <div id="p1">
          <div id="p2">
            <img src="../Images/logo.jpg" alt="logo" />
            <h3>Hello! Welcome back.</h3>
            <br />
            <form action="/verification/login" method="POST">
              <label for="email">Email</label
              ><input
                name="email"
                type="email"
                id="input"
                placeholder="Enter your phone email"
              />
              <br /><br />
              <label for="password">Password</label
              ><input
                name="Password"
                type="password"
                id="input2"
                placeholder="Enter your password"
              />
              <div id="high">
                <br /><input type="checkbox" />Remember me
                <a id="forgoten" href="forgotten">Forgotten password?</a>
              </div>

              <br /><button class="btn">
                <a id="ch" href="#" onclick="return false;">
                  <h4>Login</h4>
                </a>
              </button>
            </form>
            <div class="end">
              <h4>Don't have an account?</h4>
              <a href="welcome.html">Sign up</a>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Footer -->
    <footer>
      <div class="reach-us">
        <div class="reach contactus">
          <i class="fa-solid fa-phone-volume fa-2x"></i>
          <div class="text">
            <h3>08069182114</h3>
            <p>Contact us if you have a question</p>
          </div>
        </div>
        <div class="reach emailus">
          <i class="fa-solid fa-envelope fa-2x"></i>
          <div class="text">
            <h3>khalidkekepay@gmail.com</h3>
            <p>Drop us an email and we will get back to you</p>
          </div>
        </div>
        <div class="reach time">
          <i class="fa-regular fa-clock fa-2x"></i>
          <div class="text">
            <h3>Monday to Saturday</h3>
            <p>We are open from 9:00 PM to 6:00 PM</p>
          </div>
        </div>
      </div>
      <div class="footer-line"></div>

      <p class="mainfoot">
        &copy 2023 keke-pay <span>All right reserved</span>
      </p>
    </footer>

    <!-- -------------------------------------- -->
    <div class="mobileFooter">
      <div class="ml"></div>
      <p style="margin-bottom: 2rem">&copy 2023 keke-pay All right reserved</p>
    </div>
    <!-- ------------------ -->
    <script>
      // function submitForm() {
      const btn = document.querySelector(".btn");
      btn.addEventListener("click", (e) => {
        e.preventDefault();

        const email = document.getElementById("input").value;
        const password = document.getElementById("input2").value;

        if (email === "" || password === "") {
          alert("Please enter your email and password !");
        }
        console.log(email);
        console.log(password);
        const URL = "https://keke-pay-97cm.onrender.com/verification/login";
        // const URL = 'http://localhost:5500/verification/login'
        fetch(URL, {
          method: "POST",
          headers: {
            "Content-Type": "application/json",
          },
          body: JSON.stringify({
            email: email,
            password: password,
          }),
        })
          .then((response) => {
            if (!response.ok) {
              alert("Incorrect password. Please try again.");
              throw new Error(`HTTP error! Status: ${response.status}`);
            }
            return response.json();
          })
          .then((data) => {
            if (data.success) {
              localStorage.setItem("userId", data.userId);
              localStorage.setItem("fullName", data.name);
              localStorage.setItem("balance", data.balance);
              localStorage.setItem("count", data.count);

              window.location.href = "Dashboard.html";
            }
          })
          .catch((error) => {
            console.error("Error:", error);
          });
      });

      // nav script
      document.addEventListener("DOMContentLoaded", function () {
        const navshow = document.getElementById("navshow");
        const mobilenav = document.getElementById("mobilenav");

        navshow.addEventListener("click", function () {
          mobilenav.classList.toggle("show");
          if (mobilenav.classList.contains("show")) {
            navshow.src = "../Images/icon-close.svg";
          } else {
            navshow.src = "../Images/icon-menu.svg";
          }
        });
      });
    </script>
  </body>
</html>
