<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <link rel="stylesheet" href="../styles/Agent Login.css" />
   <link rel="stylesheet" href="#">
  </head>

  <body>
    <nav>
      <div class="nav__container">
        <a href="#"><img src="../Images/logo.jpg" /></a>

        <ul class="nav__menu">
          <select name="dropdown" class="dpd">
            <option value="English" class="lngs">English</option>
            <option value="English" class="lngs">Hause</option>
            <option value="English" class="lngs">France</option>
            <option value="English" class="lngs">Yoruba</option>
          </select>
          <li><a href="index.html">Home</a></li>
          <li><a href="../HTML/Agent Login.html">Agents</a></li>
          <li><a href="#">About us</a></li>
          <li><a href="#">Support</a></li>
        </ul>

        <div class="nav_button">
          <a href="../HTML/Login.html" class="lotion_btn">Log in</a>
          <a href="../HTML/welcome.html" class="action_btn">Get Started</a>
        </div>
      </div>
    </nav>

    <div class="container">
      <form action="/login" method="POST">
        <div class="card">
          <img
            class="logo"
            src="../Images/logo.jpg"
            alt=""
            height="20px"
            width="160px"
          />
          <h3>Agent Login</h3>
          <div class="ID">
            <label for="Agent ID"> Agent ID</label>
            <input
              id="ID"
              type="email"
              placeholder="Enter your ID"
              class="adentEmail"
            />
            <br />
          </div>
          <div class="password">
            <label for="Password">Password</label>
            <input
              id="pass"
              type="password"
              placeholder="Enter your password"
              class="agentPassword"
            /><br />
          </div>
          <div class="Check">
            <input type="checkbox" />
            Remember me
            <a id="Forgot" href="#">Forgot ID or password</a><br />
          </div>
          <input id="button" type="submit" />
        </div>
      </form>
    </div>

    <!-- Footer -->
    <footer>
      <div class="reach-us">
        <div class="reach contactus">
          <i class="fa-solid fa-phone-volume fa-2x"></i>
          <div class="text">
            <h3>08069182114</h3>
            <p>Contact us if you have a question</p>
          </div>
        </div>
        <div class="reach emailus">
          <i class="fa-solid fa-envelope fa-2x"></i>
          <div class="text">
            <h3>khalidkekepay@gmail.com</h3>
            <p>Drop us an email and we will get back to you</p>
          </div>
        </div>
        <div class="reach time">
          <i class="fa-regular fa-clock fa-2x"></i>
          <div class="text">
            <h3>Monday to Saturday</h3>
            <p>We are open from 9:00 PM to 6:00 PM</p>
          </div>
        </div>
      </div>
      <div class="footer-line"></div>

      <p class="mainfoot">
        &copy 2023 keke-pay <span>All right reserved</span>
      </p>
    </footer>
  </body>

  <script>
    const btn = document.getElementById("button");
    console.log(btn);

    btn.addEventListener("click", (e) => {
      e.preventDefault();

      // const baseUrl = 'http://localhost:5500';
      const baseUrl = "https://keke-pay-97cm.onrender.com";

      const email = document.querySelector(".adentEmail").value;
      const password = document.querySelector(".agentPassword").value;
      console.log(email);
      console.log(password);

      // if (email === '' || password === '') {
      //     alert('Please enter your email and password !')
      // }

      const loginAgent = async () => {
        try {
          const response = await fetch(`${baseUrl}/login`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
            body: JSON.stringify({
              email,
              password,
            }),
          });

          const data = await response.json();

          if (!response.ok) {
            alert(`${data.message}`);
          }

          if (response.ok) {
            alert(`${data.message}`);

            localStorage.setItem("agentId", data.agentId);
            window.location.href = "agentDashboard.html";
          }
        } catch (error) {
          console.error("error while login", error);
        }
      };

      loginAgent();
    });
  </script>
</html>
